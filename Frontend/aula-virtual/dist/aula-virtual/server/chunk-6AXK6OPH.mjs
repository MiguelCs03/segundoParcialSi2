import './polyfills.server.mjs';
import{a as L}from"./chunk-XYDLUJ5A.mjs";import{a as R,c as j,d as D,e as W,f as G,g as H,p as B}from"./chunk-TLRHLVGQ.mjs";import"./chunk-5BW553ZL.mjs";import{Aa as F,Eb as P,Ia as N,Q as a,S as _,T as C,X as f,ca as m,ga as n,ha as s,hb as k,ia as b,ib as T,ja as A,ka as w,la as g,ma as x,mb as O,na as l,oa as S,sa as E,ta as o,ua as h,va as I,x as p,y as u,ya as M,za as V}from"./chunk-5PD2IZO4.mjs";import"./chunk-S6KH3LOX.mjs";function q(i,e){if(i&1){let t=g();n(0,"div",9)(1,"span"),o(2),s(),n(3,"input",10),F("ngModelChange",function(r){let d=p(t).index,y=l(2);return V(y.asistencias[d].presente,r)||(y.asistencias[d].presente=r),u(r)}),s()()}if(i&2){let t=e.$implicit,c=e.index,r=l(2);a(2),h(t.nombre),a(),S("name","asistencia_",c,""),M("ngModel",r.asistencias[c].presente)}}function z(i,e){if(i&1){let t=g();A(0),n(1,"form",6),x("submit",function(r){return p(t),l().guardarAsistencia(),u(r.preventDefault())}),f(2,q,4,4,"div",7),n(3,"button",8),o(4," Guardar Asistencia "),s()(),w()}if(i&2){let t=l();a(2),m("ngForOf",t.estudiantes)}}function J(i,e){if(i&1&&(n(0,"tr",16)(1,"td",14),o(2),s(),n(3,"td",17),b(4,"input",18),s()()),i&2){let t=e.$implicit;a(2),h(t.nombre),a(2),m("checked",t.presente)}}function K(i,e){if(i&1&&(n(0,"h2",11),o(1),s(),n(2,"table",12)(3,"thead",13)(4,"tr")(5,"th",14),o(6,"Estudiante"),s(),n(7,"th",14),o(8,"Presente"),s()()(),n(9,"tbody"),f(10,J,5,2,"tr",15),s()()),i&2){let t=l();a(),I("Asistencia tomada el ",t.fechaAsistencia,""),a(9),m("ngForOf",t.asistenciasExistentes)}}var v=class i{constructor(e,t){this.route=e;this.profesorService=t}detalleId;estudiantes=[];asistencias=[];asistenciasRegistradas=!1;fechaAsistencia="";asistenciasExistentes=[];ngOnInit(){this.detalleId=Number(this.route.snapshot.paramMap.get("id")),this.verificarAsistenciaHoy(),this.profesorService.getEstudiantesDeMateria(this.detalleId).subscribe(e=>{this.estudiantes=e,this.asistencias=e.map(t=>({libreta_id:t.libreta_id,presente:!1}))})}verificarAsistenciaHoy(){this.profesorService.obtenerAsistenciaPorFecha(this.detalleId).subscribe({next:e=>{e.asistencias&&e.asistencias.length>0&&(this.asistenciasRegistradas=!0,this.fechaAsistencia=e.fecha,this.asistenciasExistentes=e.asistencias)},error:e=>console.error(e)})}guardarAsistencia(){this.profesorService.registrarAsistencia(this.detalleId,this.asistencias).subscribe({next:()=>alert("Asistencia guardada correctamente"),error:e=>console.error(e)})}volver(){window.history.back()}static \u0275fac=function(t){return new(t||i)(_(P),_(L))};static \u0275cmp=C({type:i,selectors:[["app-asistencia"]],decls:10,vars:2,consts:[["mostrarAsistencias",""],[1,"bg-indigo-600","p-4","text-white","flex","justify-between","items-center"],[1,"hover:bg-indigo-700","px-3","py-1","rounded",3,"click"],[1,"text-lg","font-semibold"],[1,"max-w-3xl","mx-auto","p-6","bg-white","rounded","shadow","mt-6"],[4,"ngIf","ngIfElse"],[1,"space-y-4",3,"submit"],["class","flex items-center justify-between border-b py-2",4,"ngFor","ngForOf"],["type","submit",1,"bg-indigo-600","text-white","rounded","px-4","py-2","hover:bg-indigo-700"],[1,"flex","items-center","justify-between","border-b","py-2"],["type","checkbox",1,"w-6","h-6","text-indigo-600",3,"ngModelChange","ngModel","name"],[1,"text-xl","mb-4"],[1,"w-full","text-left","table-auto","border","rounded"],[1,"bg-gray-100","font-semibold"],[1,"p-2","border"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],[1,"p-2","border","text-center"],["type","checkbox","disabled","",3,"checked"]],template:function(t,c){if(t&1){let r=g();n(0,"nav",1)(1,"button",2),x("click",function(){return p(r),u(c.volver())}),o(2," \u2190 Volver "),s(),n(3,"h1",3),o(4,"Tomar Asistencia"),s(),b(5,"div"),s(),n(6,"div",4),f(7,z,5,1,"ng-container",5)(8,K,11,2,"ng-template",null,0,N),s()}if(t&2){let r=E(9);a(7),m("ngIf",!c.asistenciasRegistradas)("ngIfElse",r)}},dependencies:[O,k,T,B,H,R,j,D,G,W],encapsulation:2})};export{v as default};
