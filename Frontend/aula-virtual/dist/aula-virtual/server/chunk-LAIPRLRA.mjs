import './polyfills.server.mjs';
import{a as ut,b as M,c as ce}from"./chunk-LGD66YUW.mjs";import{a as ct}from"./chunk-RWQ6IO2U.mjs";import{a as ft}from"./chunk-4DIDSLMT.mjs";import"./chunk-XNY5EW6Q.mjs";import{a as mt}from"./chunk-5BW553ZL.mjs";import{A as S,Ca as re,D as je,Da as et,E as qe,Ea as me,Eb as dt,F as Ke,Fa as R,Ga as tt,Ha as rt,Hb as pt,Ia as at,P as L,Q as s,S as I,T as G,U as Qe,V as Je,X as v,b as Re,ca as f,da as Xe,fa as D,ga as i,gb as it,ha as n,hb as nt,ia as x,ib as fe,j as We,la as te,lb as ot,ma as H,mb as st,na as g,o as Me,p as $e,pa as Oe,qa as ke,r as Ue,ra as Pe,sa as Ye,ta as o,ua as _,va as c,w as pe,wa as Ze,x as V,xb as lt,y as z,z as w}from"./chunk-5PD2IZO4.mjs";import"./chunk-S6KH3LOX.mjs";var $r=["donutChart"],Ur=["lineChart"];M.register(...ce);var ue=class e{datosAsistencia={};titulo="An\xE1lisis de Asistencia";donutChart;lineChart;chartDonut=null;chartLine=null;ngOnInit(){setTimeout(()=>{this.crearGraficaDona(),this.crearGraficaLinea()},100)}ngOnDestroy(){this.chartDonut&&this.chartDonut.destroy(),this.chartLine&&this.chartLine.destroy()}getPorcentajeClass(){let r=this.datosAsistencia.porcentaje||0;return r>=80?"border-green-500":r>=60?"border-yellow-500":"border-red-500"}crearGraficaDona(){let r=this.donutChart.nativeElement.getContext("2d");if(!r)return;let t=this.datosAsistencia.clases_asistidas||0,a=this.datosAsistencia.clases_perdidas||0;this.donutChart.nativeElement.width=300,this.donutChart.nativeElement.height=300,this.chartDonut=new M(r,{type:"doughnut",data:{labels:["Clases Asistidas","Clases Perdidas"],datasets:[{data:[t,a],backgroundColor:["#10B981","#EF4444"],borderColor:["#059669","#DC2626"],borderWidth:2,hoverBackgroundColor:["#059669","#DC2626"]}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0,font:{size:12}}},tooltip:{callbacks:{label:d=>{let l=t+a,m=l>0?(d.parsed/l*100).toFixed(1):0;return`${d.label}: ${d.parsed} (${m}%)`}}}},cutout:"60%"}})}crearGraficaLinea(){let r=this.lineChart.nativeElement.getContext("2d");if(!r)return;this.lineChart.nativeElement.width=800,this.lineChart.nativeElement.height=200;let a=(this.datosAsistencia.historial_semanal||[]).slice(-10),d=a.map(p=>p.fecha),l=a.map(p=>p.presente?1:0),m=this.calcularPromedioMovil(l,3);this.chartLine=new M(r,{type:"line",data:{labels:d,datasets:[{label:"Asistencia",data:l,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",pointBackgroundColor:l.map(p=>p===1?"#10B981":"#EF4444"),pointBorderColor:l.map(p=>p===1?"#059669":"#DC2626"),pointRadius:5,pointHoverRadius:7,tension:.3,fill:!0},{label:"Tendencia",data:m,borderColor:"#F59E0B",backgroundColor:"transparent",borderDash:[5,5],pointRadius:0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:4,interaction:{intersect:!1,mode:"index"},scales:{x:{title:{display:!0,text:"Fechas Recientes",font:{size:12}},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{maxTicksLimit:8,font:{size:10}}},y:{title:{display:!0,text:"Asistencia",font:{size:12}},min:0,max:1,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{stepSize:.5,callback:p=>p===1?"Presente":p===.5?"50%":p===0?"Ausente":"",font:{size:10}}}},plugins:{legend:{position:"top",labels:{boxWidth:12,font:{size:12},padding:15}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#3B82F6",borderWidth:1,callbacks:{label:p=>p.datasetIndex===0?`Asistencia: ${p.parsed.y===1?"Presente":"Ausente"}`:`Tendencia: ${(p.parsed.y*100).toFixed(1)}%`}}}}})}calcularPromedioMovil(r,t){let a=[];for(let d=0;d<r.length;d++){let l=Math.max(0,d-t+1),m=d+1,p=r.slice(l,m),u=p.reduce((b,y)=>b+y,0)/p.length;a.push(u)}return a}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=G({type:e,selectors:[["app-asistencia-chart"]],viewQuery:function(t,a){if(t&1&&(Oe($r,7),Oe(Ur,7)),t&2){let d;ke(d=Pe())&&(a.donutChart=d.first),ke(d=Pe())&&(a.lineChart=d.first)}},inputs:{datosAsistencia:"datosAsistencia",titulo:"titulo"},decls:35,vars:7,consts:[["donutChart",""],["lineChart",""],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-semibold","mb-4","text-gray-800"],[1,"flex","flex-col","lg:flex-row","items-center","gap-6","mb-8"],[1,"w-full","lg:w-1/2"],[1,"relative","h-80","w-full"],[1,"max-w-full","max-h-full"],[1,"w-full","lg:w-1/2","space-y-4"],[1,"flex","justify-between","items-center","p-3","bg-green-50","rounded-lg"],[1,"text-green-700","font-medium"],[1,"text-2xl","font-bold","text-green-600"],[1,"flex","justify-between","items-center","p-3","bg-red-50","rounded-lg"],[1,"text-red-700","font-medium"],[1,"text-2xl","font-bold","text-red-600"],[1,"flex","justify-between","items-center","p-3","bg-blue-50","rounded-lg"],[1,"text-blue-700","font-medium"],[1,"text-2xl","font-bold","text-blue-600"],[1,"flex","justify-between","items-center","p-4","bg-gray-50","rounded-lg","border-l-4"],[1,"font-semibold"],[1,"text-3xl","font-bold"],[1,"border-t","border-gray-200","pt-6"],[1,"text-lg","font-semibold","mb-4","text-gray-700"],[1,"relative","w-full","h-64","bg-gray-50","rounded-lg","p-4"]],template:function(t,a){t&1&&(i(0,"div",2)(1,"h3",3),o(2),n(),i(3,"div",4)(4,"div",5)(5,"div",6),x(6,"canvas",7,0),n()(),i(8,"div",8)(9,"div",9)(10,"span",10),o(11,"Clases Asistidas"),n(),i(12,"span",11),o(13),n()(),i(14,"div",12)(15,"span",13),o(16,"Clases Perdidas"),n(),i(17,"span",14),o(18),n()(),i(19,"div",15)(20,"span",16),o(21,"Total de Clases"),n(),i(22,"span",17),o(23),n()(),i(24,"div",18)(25,"span",19),o(26,"Porcentaje General"),n(),i(27,"span",20),o(28),n()()()(),i(29,"div",21)(30,"h4",22),o(31,"Tendencia de Asistencia"),n(),i(32,"div",23),x(33,"canvas",7,1),n()()()),t&2&&(s(2),_(a.titulo),s(11),_(a.datosAsistencia.clases_asistidas),s(5),_(a.datosAsistencia.clases_perdidas),s(5),_(a.datosAsistencia.total_clases),s(),D(a.getPorcentajeClass()),s(4),c("",a.datosAsistencia.porcentaje,"%"))},encapsulation:2})};var qr=typeof global=="object"&&global&&global.Object===Object&&global,xe=qr;var Kr=typeof self=="object"&&self&&self.Object===Object&&self,Qr=xe||Kr||Function("return this")(),E=Qr;var Jr=E.Symbol,W=Jr;var gt=Object.prototype,Xr=gt.hasOwnProperty,Yr=gt.toString,ae=W?W.toStringTag:void 0;function Zr(e){var r=Xr.call(e,ae),t=e[ae];try{e[ae]=void 0;var a=!0}catch{}var d=Yr.call(e);return a&&(r?e[ae]=t:delete e[ae]),d}var ht=Zr;var ea=Object.prototype,ta=ea.toString;function ra(e){return ta.call(e)}var vt=ra;var aa="[object Null]",ia="[object Undefined]",bt=W?W.toStringTag:void 0;function na(e){return e==null?e===void 0?ia:aa:bt&&bt in Object(e)?ht(e):vt(e)}var j=na;function oa(e){return e!=null&&typeof e=="object"}var A=oa;var sa=Array.isArray,ie=sa;function la(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var C=la;function da(e){return e}var ge=da;var pa="[object AsyncFunction]",ma="[object Function]",fa="[object GeneratorFunction]",ca="[object Proxy]";function ua(e){if(!C(e))return!1;var r=j(e);return r==ma||r==fa||r==pa||r==ca}var $=ua;var xa=E["__core-js_shared__"],he=xa;var yt=function(){var e=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ga(e){return!!yt&&yt in e}var _t=ga;var ha=Function.prototype,va=ha.toString;function ba(e){if(e!=null){try{return va.call(e)}catch{}try{return e+""}catch{}}return""}var Ct=ba;var ya=/[\\^$.*+?()[\]{}|]/g,_a=/^\[object .+?Constructor\]$/,Ca=Function.prototype,wa=Object.prototype,Sa=Ca.toString,Ea=wa.hasOwnProperty,Aa=RegExp("^"+Sa.call(Ea).replace(ya,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ia(e){if(!C(e)||_t(e))return!1;var r=$(e)?Aa:_a;return r.test(Ct(e))}var wt=Ia;function Da(e,r){return e?.[r]}var St=Da;function Ta(e,r){var t=St(e,r);return wt(t)?t:void 0}var U=Ta;var Et=Object.create,Ma=function(){function e(){}return function(r){if(!C(r))return{};if(Et)return Et(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),At=Ma;function ja(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var It=ja;function Oa(e,r){var t=-1,a=e.length;for(r||(r=Array(a));++t<a;)r[t]=e[t];return r}var Dt=Oa;var ka=800,Pa=16,Fa=Date.now;function Na(e){var r=0,t=0;return function(){var a=Fa(),d=Pa-(a-t);if(t=a,d>0){if(++r>=ka)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var Tt=Na;function Ba(e){return function(){return e}}var Mt=Ba;var La=function(){try{var e=U(Object,"defineProperty");return e({},"",{}),e}catch{}}(),q=La;var Ha=q?function(e,r){return q(e,"toString",{configurable:!0,enumerable:!1,value:Mt(r),writable:!0})}:ge,jt=Ha;var Va=Tt(jt),Ot=Va;var za=9007199254740991,Ga=/^(?:0|[1-9]\d*)$/;function Ra(e,r){var t=typeof e;return r=r??za,!!r&&(t=="number"||t!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<r}var ve=Ra;function Wa(e,r,t){r=="__proto__"&&q?q(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var K=Wa;function $a(e,r){return e===r||e!==e&&r!==r}var O=$a;var Ua=Object.prototype,qa=Ua.hasOwnProperty;function Ka(e,r,t){var a=e[r];(!(qa.call(e,r)&&O(a,t))||t===void 0&&!(r in e))&&K(e,r,t)}var kt=Ka;function Qa(e,r,t,a){var d=!t;t||(t={});for(var l=-1,m=r.length;++l<m;){var p=r[l],u=a?a(t[p],e[p],p,t,e):void 0;u===void 0&&(u=e[p]),d?K(t,p,u):kt(t,p,u)}return t}var Pt=Qa;var Ft=Math.max;function Ja(e,r,t){return r=Ft(r===void 0?e.length-1:r,0),function(){for(var a=arguments,d=-1,l=Ft(a.length-r,0),m=Array(l);++d<l;)m[d]=a[r+d];d=-1;for(var p=Array(r+1);++d<r;)p[d]=a[d];return p[r]=t(m),It(e,this,p)}}var Nt=Ja;function Xa(e,r){return Ot(Nt(e,r,ge),e+"")}var Bt=Xa;var Ya=9007199254740991;function Za(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ya}var be=Za;function ei(e){return e!=null&&be(e.length)&&!$(e)}var Q=ei;function ti(e,r,t){if(!C(t))return!1;var a=typeof r;return(a=="number"?Q(t)&&ve(r,t.length):a=="string"&&r in t)?O(t[r],e):!1}var Lt=ti;function ri(e){return Bt(function(r,t){var a=-1,d=t.length,l=d>1?t[d-1]:void 0,m=d>2?t[2]:void 0;for(l=e.length>3&&typeof l=="function"?(d--,l):void 0,m&&Lt(t[0],t[1],m)&&(l=d<3?void 0:l,d=1),r=Object(r);++a<d;){var p=t[a];p&&e(r,p,a,l)}return r})}var Ht=ri;var ai=Object.prototype;function ii(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||ai;return e===t}var ye=ii;function ni(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var Vt=ni;var oi="[object Arguments]";function si(e){return A(e)&&j(e)==oi}var Ne=si;var zt=Object.prototype,li=zt.hasOwnProperty,di=zt.propertyIsEnumerable,pi=Ne(function(){return arguments}())?Ne:function(e){return A(e)&&li.call(e,"callee")&&!di.call(e,"callee")},ne=pi;function mi(){return!1}var Gt=mi;var $t=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rt=$t&&typeof module=="object"&&module&&!module.nodeType&&module,fi=Rt&&Rt.exports===$t,Wt=fi?E.Buffer:void 0,ci=Wt?Wt.isBuffer:void 0,ui=ci||Gt,_e=ui;var xi="[object Arguments]",gi="[object Array]",hi="[object Boolean]",vi="[object Date]",bi="[object Error]",yi="[object Function]",_i="[object Map]",Ci="[object Number]",wi="[object Object]",Si="[object RegExp]",Ei="[object Set]",Ai="[object String]",Ii="[object WeakMap]",Di="[object ArrayBuffer]",Ti="[object DataView]",Mi="[object Float32Array]",ji="[object Float64Array]",Oi="[object Int8Array]",ki="[object Int16Array]",Pi="[object Int32Array]",Fi="[object Uint8Array]",Ni="[object Uint8ClampedArray]",Bi="[object Uint16Array]",Li="[object Uint32Array]",h={};h[Mi]=h[ji]=h[Oi]=h[ki]=h[Pi]=h[Fi]=h[Ni]=h[Bi]=h[Li]=!0;h[xi]=h[gi]=h[Di]=h[hi]=h[Ti]=h[vi]=h[bi]=h[yi]=h[_i]=h[Ci]=h[wi]=h[Si]=h[Ei]=h[Ai]=h[Ii]=!1;function Hi(e){return A(e)&&be(e.length)&&!!h[j(e)]}var Ut=Hi;function Vi(e){return function(r){return e(r)}}var qt=Vi;var Kt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oe=Kt&&typeof module=="object"&&module&&!module.nodeType&&module,zi=oe&&oe.exports===Kt,Be=zi&&xe.process,Gi=function(){try{var e=oe&&oe.require&&oe.require("util").types;return e||Be&&Be.binding&&Be.binding("util")}catch{}}(),Le=Gi;var Qt=Le&&Le.isTypedArray,Ri=Qt?qt(Qt):Ut,Ce=Ri;var Wi=Object.prototype,$i=Wi.hasOwnProperty;function Ui(e,r){var t=ie(e),a=!t&&ne(e),d=!t&&!a&&_e(e),l=!t&&!a&&!d&&Ce(e),m=t||a||d||l,p=m?Vt(e.length,String):[],u=p.length;for(var b in e)(r||$i.call(e,b))&&!(m&&(b=="length"||d&&(b=="offset"||b=="parent")||l&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||ve(b,u)))&&p.push(b);return p}var Jt=Ui;function qi(e,r){return function(t){return e(r(t))}}var Xt=qi;function Ki(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var Yt=Ki;var Qi=Object.prototype,Ji=Qi.hasOwnProperty;function Xi(e){if(!C(e))return Yt(e);var r=ye(e),t=[];for(var a in e)a=="constructor"&&(r||!Ji.call(e,a))||t.push(a);return t}var Zt=Xi;function Yi(e){return Q(e)?Jt(e,!0):Zt(e)}var we=Yi;var Zi=U(Object,"create"),T=Zi;function en(){this.__data__=T?T(null):{},this.size=0}var er=en;function tn(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var tr=tn;var rn="__lodash_hash_undefined__",an=Object.prototype,nn=an.hasOwnProperty;function on(e){var r=this.__data__;if(T){var t=r[e];return t===rn?void 0:t}return nn.call(r,e)?r[e]:void 0}var rr=on;var sn=Object.prototype,ln=sn.hasOwnProperty;function dn(e){var r=this.__data__;return T?r[e]!==void 0:ln.call(r,e)}var ar=dn;var pn="__lodash_hash_undefined__";function mn(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=T&&r===void 0?pn:r,this}var ir=mn;function J(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}J.prototype.clear=er;J.prototype.delete=tr;J.prototype.get=rr;J.prototype.has=ar;J.prototype.set=ir;var He=J;function fn(){this.__data__=[],this.size=0}var nr=fn;function cn(e,r){for(var t=e.length;t--;)if(O(e[t][0],r))return t;return-1}var k=cn;var un=Array.prototype,xn=un.splice;function gn(e){var r=this.__data__,t=k(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():xn.call(r,t,1),--this.size,!0}var or=gn;function hn(e){var r=this.__data__,t=k(r,e);return t<0?void 0:r[t][1]}var sr=hn;function vn(e){return k(this.__data__,e)>-1}var lr=vn;function bn(e,r){var t=this.__data__,a=k(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var dr=bn;function X(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}X.prototype.clear=nr;X.prototype.delete=or;X.prototype.get=sr;X.prototype.has=lr;X.prototype.set=dr;var P=X;var yn=U(E,"Map"),Se=yn;function _n(){this.size=0,this.__data__={hash:new He,map:new(Se||P),string:new He}}var pr=_n;function Cn(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var mr=Cn;function wn(e,r){var t=e.__data__;return mr(r)?t[typeof r=="string"?"string":"hash"]:t.map}var F=wn;function Sn(e){var r=F(this,e).delete(e);return this.size-=r?1:0,r}var fr=Sn;function En(e){return F(this,e).get(e)}var cr=En;function An(e){return F(this,e).has(e)}var ur=An;function In(e,r){var t=F(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var xr=In;function Y(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}Y.prototype.clear=pr;Y.prototype.delete=fr;Y.prototype.get=cr;Y.prototype.has=ur;Y.prototype.set=xr;var gr=Y;var Dn=Xt(Object.getPrototypeOf,Object),Ee=Dn;var Tn="[object Object]",Mn=Function.prototype,jn=Object.prototype,hr=Mn.toString,On=jn.hasOwnProperty,kn=hr.call(Object);function Pn(e){if(!A(e)||j(e)!=Tn)return!1;var r=Ee(e);if(r===null)return!0;var t=On.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&hr.call(t)==kn}var vr=Pn;function Fn(){this.__data__=new P,this.size=0}var br=Fn;function Nn(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var yr=Nn;function Bn(e){return this.__data__.get(e)}var _r=Bn;function Ln(e){return this.__data__.has(e)}var Cr=Ln;var Hn=200;function Vn(e,r){var t=this.__data__;if(t instanceof P){var a=t.__data__;if(!Se||a.length<Hn-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new gr(a)}return t.set(e,r),this.size=t.size,this}var wr=Vn;function Z(e){var r=this.__data__=new P(e);this.size=r.size}Z.prototype.clear=br;Z.prototype.delete=yr;Z.prototype.get=_r;Z.prototype.has=Cr;Z.prototype.set=wr;var Sr=Z;var Dr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Er=Dr&&typeof module=="object"&&module&&!module.nodeType&&module,zn=Er&&Er.exports===Dr,Ar=zn?E.Buffer:void 0,Ir=Ar?Ar.allocUnsafe:void 0;function Gn(e,r){if(r)return e.slice();var t=e.length,a=Ir?Ir(t):new e.constructor(t);return e.copy(a),a}var Tr=Gn;var Rn=E.Uint8Array,Ve=Rn;function Wn(e){var r=new e.constructor(e.byteLength);return new Ve(r).set(new Ve(e)),r}var Mr=Wn;function $n(e,r){var t=r?Mr(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var jr=$n;function Un(e){return typeof e.constructor=="function"&&!ye(e)?At(Ee(e)):{}}var Or=Un;function qn(e){return function(r,t,a){for(var d=-1,l=Object(r),m=a(r),p=m.length;p--;){var u=m[e?p:++d];if(t(l[u],u,l)===!1)break}return r}}var kr=qn;var Kn=kr(),Pr=Kn;function Qn(e,r,t){(t!==void 0&&!O(e[r],t)||t===void 0&&!(r in e))&&K(e,r,t)}var se=Qn;function Jn(e){return A(e)&&Q(e)}var Fr=Jn;function Xn(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var le=Xn;function Yn(e){return Pt(e,we(e))}var Nr=Yn;function Zn(e,r,t,a,d,l,m){var p=le(e,t),u=le(r,t),b=m.get(u);if(b){se(e,t,b);return}var y=l?l(p,u,t+"",e,r,m):void 0,ee=y===void 0;if(ee){var De=ie(u),Te=!De&&_e(u),Ge=!De&&!Te&&Ce(u);y=u,De||Te||Ge?ie(p)?y=p:Fr(p)?y=Dt(p):Te?(ee=!1,y=Tr(u,!0)):Ge?(ee=!1,y=jr(u,!0)):y=[]:vr(u)||ne(u)?(y=p,ne(p)?y=Nr(p):(!C(p)||$(p))&&(y=Or(u))):ee=!1}ee&&(m.set(u,y),d(y,u,a,l,m),m.delete(u)),se(e,t,y)}var Br=Zn;function Lr(e,r,t,a,d){e!==r&&Pr(r,function(l,m){if(d||(d=new Sr),C(l))Br(e,r,m,t,Lr,a,d);else{var p=a?a(le(e,m),l,m+"",e,r,d):void 0;p===void 0&&(p=l),se(e,m,p)}},we)}var Hr=Lr;var eo=Ht(function(e,r,t){Hr(e,r,t)}),Ae=eo;var to=(()=>{class e{constructor(){this.colorschemesOptions=new Re(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zr=(()=>{class e{constructor(t,a,d){this.zone=a,this.themeService=d,this.type="bar",this.plugins=[],this.chartClick=new je,this.chartHover=new je,this.subs=[],this.themeOverrides={},this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(We()).subscribe(l=>this.themeChanged(l)))}ngOnChanges(t){let a=["type"],d=Object.getOwnPropertyNames(t);if(d.some(l=>a.includes(l))||d.every(l=>t[l].isFirstChange()))this.render();else{let l=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,l.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,l.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,l.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new M(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,a){this.chart&&(this.chart.getDatasetMeta(t).hidden=a,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Ae({onHover:(t,a)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:a}))},onClick:(t,a)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:a}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return e.\u0275fac=function(t){return new(t||e)(I(Ke),I(qe),I(to))},e.\u0275dir=Je({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],standalone:!1,features:[pe]}),e})(),ro=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],ao={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:e=>N(B(e.datasetIndex),.4),borderColor:e=>N(B(e.datasetIndex),1),pointBackgroundColor:e=>N(B(e.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:e=>N(B(e.datasetIndex),.6),borderColor:e=>N(B(e.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:e=>N(B(e.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:e=>N(B(e.dataIndex),.6),borderColor:e=>N(B(e.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function N(e,r){return"rgba("+e.concat(r).join(",")+")"}function ze(e,r){return Math.floor(Math.random()*(r-e+1))+e}function io(){return[ze(0,255),ze(0,255),ze(0,255)]}function B(e=0){return ro[e]||io()}var Vr=(()=>{class e{constructor(){this.generateColors=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();M.register(...ce);var Gr=(()=>{class e{constructor(t){t?.plugins&&M.register(...t?.plugins);let a=Ae(t?.generateColors?ao:{},t?.defaults||{});ut.set(a)}static forRoot(t){return{ngModule:e,providers:[{provide:Vr,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Ue(Vr,8))},e.\u0275mod=Qe({type:e}),e.\u0275inj=$e({}),e})();function oo(e,r){if(e&1&&(i(0,"div",67)(1,"div",68)(2,"div",69),o(3),n(),i(4,"div")(5,"div",70),o(6," Tendencia General: "),i(7,"span"),o(8),n()(),i(9,"div",71),o(10),n()()()()),e&2){let t=g();s(3),c(" ",t.tendencia==="ascendente"?"\u{1F4C8}":t.tendencia==="descendente"?"\u{1F4C9}":"\u27A1\uFE0F"," "),s(4),D(t.getTendenciaColorClass()),s(),c(" ",t.getTendenciaTexto()," "),s(2),c(" ",t.getAnalisisTendencia()," ")}}function so(e,r){if(e&1&&(i(0,"div",72),x(1,"canvas",73),n()),e&2){let t=g();s(),Xe("height",t.altura,"px"),f("data",t.lineChartData)("options",t.lineChartOptions)("type",t.lineChartType)}}function lo(e,r){e&1&&(i(0,"div",74)(1,"div",75),w(),i(2,"svg",76),x(3,"path",77),n()(),S(),i(4,"h3",78),o(5,"No hay datos disponibles"),n(),i(6,"p",79),o(7,"Agrega actividades con notas para ver el an\xE1lisis de evoluci\xF3n."),n(),i(8,"div",80)(9,"p",62),o(10," \u{1F4A1} "),i(11,"strong"),o(12,"Tip:"),n(),o(13," Las actividades deben tener asignada una dimensi\xF3n y una nota v\xE1lida. "),n()()())}function po(e,r){e&1&&(i(0,"li"),o(1,"\u2022 "),i(2,"strong"),o(3,"Vista por Tiempo:"),n(),o(4," Muestra la evoluci\xF3n de cada dimensi\xF3n a lo largo del tiempo."),n())}function mo(e,r){e&1&&(i(0,"li"),o(1,"\u2022 "),i(2,"strong"),o(3,"Vista por Actividad:"),n(),o(4," Compara el rendimiento en las 4 dimensiones para cada actividad."),n())}function fo(e,r){if(e&1&&(i(0,"p"),o(1,"\u2022 Enfocar esfuerzos en mejorar la dimensi\xF3n "),i(2,"strong"),o(3),n(),o(4),n()),e&2){let t=g(2);s(3),_(t.peorDimension.toUpperCase()),s(),c(" (promedio: ",t.getPromedioDimension(t.peorDimension),"%)")}}function co(e,r){if(e&1&&(i(0,"p"),o(1,"\u2022 Mantener el buen rendimiento en "),i(2,"strong"),o(3),n(),o(4),n()),e&2){let t=g(2);s(3),_(t.mejorDimension.toUpperCase()),s(),c(" (promedio: ",t.getPromedioDimension(t.mejorDimension),"%)")}}function uo(e,r){e&1&&(i(0,"p"),o(1,"\u2022 La tendencia descendente sugiere revisar las estrategias de estudio"),n())}function xo(e,r){e&1&&(i(0,"p"),o(1,"\u2022 \xA1Excelente! La tendencia ascendente muestra progreso constante"),n())}function go(e,r){e&1&&(i(0,"p"),o(1,"\u2022 El promedio general est\xE1 por debajo del 70%, considera buscar apoyo adicional"),n())}function ho(e,r){if(e&1&&(i(0,"div",81)(1,"div",59),w(),i(2,"svg",82),x(3,"path",83),n(),S(),i(4,"div",84)(5,"p",63),o(6,"Recomendaciones:"),n(),i(7,"div",85),v(8,fo,5,2,"p",65)(9,co,5,2,"p",65)(10,uo,2,0,"p",65)(11,xo,2,0,"p",65)(12,go,2,0,"p",65),n()()()()),e&2){let t=g();s(8),f("ngIf",t.peorDimension),s(),f("ngIf",t.mejorDimension),s(),f("ngIf",t.tendencia==="descendente"),s(),f("ngIf",t.tendencia==="ascendente"),s(),f("ngIf",t.promedioGeneral<70)}}var Ie=class e{actividades=[];mostrarPorActividad=!1;altura=400;actividadesValidas=[];lineChartType="line";mejorDimension="";peorDimension="";tendencia="estable";promedioGeneral=0;lineChartOptions={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{title:r=>`Fecha: ${r[0].label}`,label:r=>`${r.dataset.label}: ${r.parsed.y}%`}}},scales:{y:{min:0,max:100,title:{display:!0,text:"Nota (%)",font:{weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{callback:function(r){return r+"%"}}},x:{title:{display:!0,text:"Fecha de Entrega",font:{weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}}},elements:{line:{borderWidth:3},point:{radius:6,hoverRadius:8,borderWidth:2}}};ngOnChanges(r){r.actividades&&(this.actualizarActividadesValidas(),this.calcularEstadisticas())}actualizarActividadesValidas(){this.actividadesValidas=this.actividades.filter(r=>r&&r.dimension&&r.nota!==null&&r.nota!==void 0&&r.nota>=0)}getColorClasePromedio(r){return r>=90?"text-green-600":r>=80?"text-blue-600":r>=70?"text-yellow-600":r>=60?"text-orange-600":"text-red-600"}getTendenciaDimension(r){let t=this.actividadesValidas.filter(m=>m.dimension===r).sort((m,p)=>{let u=new Date(m.fecha_entrega||m.fecha_creacion||"").getTime(),b=new Date(p.fecha_entrega||p.fecha_creacion||"").getTime();return u-b});if(t.length<2)return"estable";let a=t[0].nota,l=t[t.length-1].nota-a;return l>5?"ascendente":l<-5?"descendente":"estable"}getTendenciaIcon(r){switch(r){case"ascendente":return'<svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>';case"descendente":return'<svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>';default:return'<svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>'}}getTendenciaColorClass(){switch(this.tendencia){case"ascendente":return"text-green-600 font-semibold";case"descendente":return"text-red-600 font-semibold";default:return"text-gray-600 font-semibold"}}getTendenciaTexto(){switch(this.tendencia){case"ascendente":return"En Mejora";case"descendente":return"En Declive";default:return"Estable"}}getAnalisisTendencia(){let r=this.actividadesValidas.length;switch(this.tendencia){case"ascendente":return`Las notas han mostrado una mejora consistente en las \xFAltimas ${r} actividades.`;case"descendente":return`Se observa una tendencia decreciente en las \xFAltimas ${r} actividades que requiere atenci\xF3n.`;default:return`El rendimiento se ha mantenido relativamente estable en las \xFAltimas ${r} actividades.`}}calcularEstadisticas(){if(this.actividadesValidas.length===0)return;let r=["ser","saber","hacer","decidir"],t={};r.forEach(l=>{let m=parseFloat(this.getPromedioDimension(l));t[l]=m});let a=Object.entries(t).filter(([l,m])=>m>0);a.length>0&&(this.mejorDimension=a.reduce((l,m)=>l[1]>m[1]?l:m)[0],this.peorDimension=a.reduce((l,m)=>l[1]<m[1]?l:m)[0]);let d=this.actividadesValidas.map(l=>l.nota);this.promedioGeneral=Math.round(d.reduce((l,m)=>l+m,0)/d.length),this.calcularTendenciaGeneral()}calcularTendenciaGeneral(){if(this.actividadesValidas.length<3){this.tendencia="estable";return}let r=[...this.actividadesValidas].sort((p,u)=>{let b=new Date(p.fecha_entrega||p.fecha_creacion||"").getTime(),y=new Date(u.fecha_entrega||u.fecha_creacion||"").getTime();return b-y}),t=r.slice(0,3),a=r.slice(-3),d=t.reduce((p,u)=>p+u.nota,0)/t.length,m=a.reduce((p,u)=>p+u.nota,0)/a.length-d;m>5?this.tendencia="ascendente":m<-5?this.tendencia="descendente":this.tendencia="estable"}getPromedioDimension(r){let t=this.actividadesValidas.filter(d=>d.dimension===r);if(t.length===0)return"0";let a=t.reduce((d,l)=>d+l.nota,0);return Math.round(a/t.length).toString()}getContadorDimension(r){return this.actividadesValidas.filter(t=>t.dimension===r).length}get lineChartData(){if(this.actividadesValidas.length===0)return{labels:[],datasets:[]};let r=[...this.actividadesValidas].sort((l,m)=>{let p=new Date(l.fecha_entrega||l.fecha_creacion||"").getTime(),u=new Date(m.fecha_entrega||m.fecha_creacion||"").getTime();return p-u}),t=Array.from(new Set(r.map(l=>new Date(l.fecha_entrega||l.fecha_creacion||"").toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})))),a=l=>t.map(m=>{let p=r.find(u=>{let y=new Date(u.fecha_entrega||u.fecha_creacion||"").toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"});return u.dimension===l&&y===m});return p?p.nota:null}),d=[{label:"Ser",data:a("ser"),borderColor:"#a855f7",backgroundColor:"rgba(168, 85, 247, 0.1)",tension:.4,fill:!1,pointRadius:6,pointBackgroundColor:"#a855f7",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:8,spanGaps:!0},{label:"Saber",data:a("saber"),borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,fill:!1,pointRadius:6,pointBackgroundColor:"#2563eb",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:8,spanGaps:!0},{label:"Hacer",data:a("hacer"),borderColor:"#facc15",backgroundColor:"rgba(250, 204, 21, 0.1)",tension:.4,fill:!1,pointRadius:6,pointBackgroundColor:"#facc15",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:8,spanGaps:!0},{label:"Decidir",data:a("decidir"),borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4,fill:!1,pointRadius:6,pointBackgroundColor:"#22c55e",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:8,spanGaps:!0}].filter(l=>l.data.some(m=>m!==null));return{labels:t,datasets:d}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=G({type:e,selectors:[["app-notas-grafico"]],inputs:{actividades:"actividades",mostrarPorActividad:"mostrarPorActividad",altura:"altura"},features:[pe],decls:115,vars:32,consts:[["noDataTemplate",""],[1,"bg-gradient-to-br","from-white","to-gray-50","rounded-xl","shadow-lg","p-6","border","border-gray-100"],[1,"mb-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-2xl","font-bold","text-gray-800","mb-1","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-blue-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-gray-600"],[1,"text-right","space-y-1"],[1,"text-sm","text-gray-500"],[1,"text-3xl","font-bold"],[1,"text-xs","text-gray-500"],[1,"flex","items-center","justify-center","mb-4"],[1,"bg-gray-100","rounded-lg","p-1","flex"],[1,"px-4","py-2","rounded-md","text-sm","transition-all","duration-200","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0h10a2 2 0 002-2V7a2 2 0 00-2-2H9m0 12v-3m0 0h10v3M9 14h10"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-4"],[1,"bg-gradient-to-br","from-purple-50","to-purple-100","rounded-lg","p-4","border","border-purple-200","relative","overflow-hidden"],[1,"relative","z-10"],[1,"text-xs","font-medium","text-purple-600","uppercase","tracking-wide","mb-1"],[1,"text-xl","font-bold","text-purple-700","flex","items-center"],[1,"ml-2",3,"innerHTML"],[1,"text-xs","text-purple-500"],[1,"text-xs","text-purple-600","font-medium","mt-1"],[1,"absolute","top-0","right-0","w-16","h-16","bg-purple-200","rounded-full","-mr-8","-mt-8","opacity-20"],[1,"bg-gradient-to-br","from-blue-50","to-blue-100","rounded-lg","p-4","border","border-blue-200","relative","overflow-hidden"],[1,"text-xs","font-medium","text-blue-600","uppercase","tracking-wide","mb-1"],[1,"text-xl","font-bold","text-blue-700","flex","items-center"],[1,"text-xs","text-blue-500"],[1,"text-xs","text-blue-600","font-medium","mt-1"],[1,"absolute","top-0","right-0","w-16","h-16","bg-blue-200","rounded-full","-mr-8","-mt-8","opacity-20"],[1,"bg-gradient-to-br","from-yellow-50","to-yellow-100","rounded-lg","p-4","border","border-yellow-200","relative","overflow-hidden"],[1,"text-xs","font-medium","text-yellow-600","uppercase","tracking-wide","mb-1"],[1,"text-xl","font-bold","text-yellow-700","flex","items-center"],[1,"text-xs","text-yellow-500"],[1,"text-xs","text-yellow-600","font-medium","mt-1"],[1,"absolute","top-0","right-0","w-16","h-16","bg-yellow-200","rounded-full","-mr-8","-mt-8","opacity-20"],[1,"bg-gradient-to-br","from-green-50","to-green-100","rounded-lg","p-4","border","border-green-200","relative","overflow-hidden"],[1,"text-xs","font-medium","text-green-600","uppercase","tracking-wide","mb-1"],[1,"text-xl","font-bold","text-green-700","flex","items-center"],[1,"text-xs","text-green-500"],[1,"text-xs","text-green-600","font-medium","mt-1"],[1,"absolute","top-0","right-0","w-16","h-16","bg-green-200","rounded-full","-mr-8","-mt-8","opacity-20"],["class","bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg p-4 border border-indigo-200 mb-4",4,"ngIf"],["class","bg-white rounded-lg p-4 shadow-sm border border-gray-100 mb-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","flex-wrap","justify-center","gap-6","text-sm"],[1,"flex","items-center","group","cursor-pointer","transform","hover:scale-105","transition-transform"],[1,"w-4","h-4","rounded-full","mr-2","shadow-sm","border-2","border-white",2,"background","linear-gradient(135deg, #a855f7, #c084fc)"],[1,"font-medium","text-gray-700","group-hover:text-purple-600","transition-colors"],[1,"w-4","h-4","rounded-full","mr-2","shadow-sm","border-2","border-white",2,"background","linear-gradient(135deg, #2563eb, #60a5fa)"],[1,"font-medium","text-gray-700","group-hover:text-blue-600","transition-colors"],[1,"w-4","h-4","rounded-full","mr-2","shadow-sm","border-2","border-white",2,"background","linear-gradient(135deg, #facc15, #fde047)"],[1,"font-medium","text-gray-700","group-hover:text-yellow-600","transition-colors"],[1,"w-4","h-4","rounded-full","mr-2","shadow-sm","border-2","border-white",2,"background","linear-gradient(135deg, #22c55e, #4ade80)"],[1,"font-medium","text-gray-700","group-hover:text-green-600","transition-colors"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","rounded-lg","p-4","border","border-blue-100"],[1,"flex","items-start"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-blue-500","mt-0.5","mr-3","flex-shrink-0"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"text-sm","text-blue-700"],[1,"font-semibold","mb-2"],[1,"space-y-1","text-xs"],[4,"ngIf"],["class","bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-100",4,"ngIf"],[1,"bg-gradient-to-r","from-indigo-50","to-blue-50","rounded-lg","p-4","border","border-indigo-200","mb-4"],[1,"flex","items-center"],[1,"text-2xl","mr-3"],[1,"font-semibold","text-indigo-800"],[1,"text-sm","text-indigo-600","mt-1"],[1,"bg-white","rounded-lg","p-4","shadow-sm","border","border-gray-100","mb-4"],["baseChart","",1,"w-full",3,"data","options","type"],[1,"bg-white","rounded-lg","p-12","shadow-sm","border","border-gray-100","text-center"],[1,"text-gray-400","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-20","h-20","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-xl","font-semibold","text-gray-900","mb-3"],[1,"text-gray-500","mb-4"],[1,"bg-blue-50","rounded-lg","p-4","inline-block"],[1,"bg-gradient-to-r","from-green-50","to-emerald-50","rounded-lg","p-4","border","border-green-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-500","mt-0.5","mr-3","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"text-sm","text-green-700"],[1,"text-xs","space-y-1"]],template:function(t,a){if(t&1){let d=te();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3",4),w(),i(5,"svg",5),x(6,"path",6),n(),o(7),n(),S(),i(8,"p",7),o(9),n()(),i(10,"div",8)(11,"div",9),o(12,"Promedio General"),n(),i(13,"div",10),o(14),n(),i(15,"div",11),o(16),n()()(),i(17,"div",12)(18,"div",13)(19,"button",14),H("click",function(){return V(d),z(a.mostrarPorActividad=!1)}),w(),i(20,"svg",15),x(21,"path",16),n(),o(22," Por Tiempo "),n(),S(),i(23,"button",14),H("click",function(){return V(d),z(a.mostrarPorActividad=!0)}),w(),i(24,"svg",15),x(25,"path",17),n(),o(26," Por Actividad "),n()()(),S(),i(27,"div",18)(28,"div",19)(29,"div",20)(30,"div",21),o(31,"Ser"),n(),i(32,"div",22),o(33),x(34,"span",23),n(),i(35,"div",24),o(36),n(),i(37,"div",25),o(38),n()(),x(39,"div",26),n(),i(40,"div",27)(41,"div",20)(42,"div",28),o(43,"Saber"),n(),i(44,"div",29),o(45),x(46,"span",23),n(),i(47,"div",30),o(48),n(),i(49,"div",31),o(50),n()(),x(51,"div",32),n(),i(52,"div",33)(53,"div",20)(54,"div",34),o(55,"Hacer"),n(),i(56,"div",35),o(57),x(58,"span",23),n(),i(59,"div",36),o(60),n(),i(61,"div",37),o(62),n()(),x(63,"div",38),n(),i(64,"div",39)(65,"div",20)(66,"div",40),o(67,"Decidir"),n(),i(68,"div",41),o(69),x(70,"span",23),n(),i(71,"div",42),o(72),n(),i(73,"div",43),o(74),n()(),x(75,"div",44),n()(),v(76,oo,11,5,"div",45),n(),v(77,so,2,5,"div",46)(78,lo,14,0,"ng-template",null,0,at),i(80,"div",47)(81,"div",48)(82,"div",49),x(83,"div",50),i(84,"span",51),o(85," Ser (Actitudes y valores) "),n()(),i(86,"div",49),x(87,"div",52),i(88,"span",53),o(89," Saber (Conocimientos) "),n()(),i(90,"div",49),x(91,"div",54),i(92,"span",55),o(93," Hacer (Habilidades) "),n()(),i(94,"div",49),x(95,"div",56),i(96,"span",57),o(97," Decidir (Decisiones) "),n()()(),i(98,"div",58)(99,"div",59),w(),i(100,"svg",60),x(101,"path",61),n(),S(),i(102,"div",62)(103,"p",63),o(104,"Interpretaci\xF3n del gr\xE1fico:"),n(),i(105,"ul",64),v(106,po,5,0,"li",65)(107,mo,5,0,"li",65),i(108,"li"),o(109,"\u2022 Las l\xEDneas conectan los puntos para mostrar patrones y tendencias."),n(),i(110,"li"),o(111,"\u2022 Los puntos m\xE1s altos indican mejor rendimiento en esa dimensi\xF3n."),n(),i(112,"li"),o(113,"\u2022 Usa el toggle superior para cambiar entre las dos vistas disponibles."),n()()()()(),v(114,ho,13,5,"div",66),n()()}if(t&2){let d=Ye(79);s(7),c(" ",a.mostrarPorActividad?"Notas por Actividad y Dimensi\xF3n":"Evoluci\xF3n de Notas por Dimensi\xF3n"," "),s(2),c(" ",a.mostrarPorActividad?"Comparaci\xF3n de notas por dimensi\xF3n en cada actividad espec\xEDfica":"Seguimiento del progreso acad\xE9mico a trav\xE9s del tiempo"," "),s(4),D(a.getColorClasePromedio(a.promedioGeneral)),s(),c(" ",a.promedioGeneral,"% "),s(2),c("",a.actividadesValidas.length," actividades"),s(3),D(a.mostrarPorActividad?"text-gray-600":"bg-white shadow-sm text-blue-600 font-medium"),s(4),D(a.mostrarPorActividad?"bg-white shadow-sm text-blue-600 font-medium":"text-gray-600"),s(10),c(" ",a.getPromedioDimension("ser"),"% "),s(),f("innerHTML",a.getTendenciaIcon(a.getTendenciaDimension("ser")),L),s(2),c("",a.getContadorDimension("ser")," actividades"),s(2),c(" ",a.mejorDimension==="ser"?"\u{1F3C6} Mejor":a.peorDimension==="ser"?"\u{1F4C8} A mejorar":""," "),s(7),c(" ",a.getPromedioDimension("saber"),"% "),s(),f("innerHTML",a.getTendenciaIcon(a.getTendenciaDimension("saber")),L),s(2),c("",a.getContadorDimension("saber")," actividades"),s(2),c(" ",a.mejorDimension==="saber"?"\u{1F3C6} Mejor":a.peorDimension==="saber"?"\u{1F4C8} A mejorar":""," "),s(7),c(" ",a.getPromedioDimension("hacer"),"% "),s(),f("innerHTML",a.getTendenciaIcon(a.getTendenciaDimension("hacer")),L),s(2),c("",a.getContadorDimension("hacer")," actividades"),s(2),c(" ",a.mejorDimension==="hacer"?"\u{1F3C6} Mejor":a.peorDimension==="hacer"?"\u{1F4C8} A mejorar":""," "),s(7),c(" ",a.getPromedioDimension("decidir"),"% "),s(),f("innerHTML",a.getTendenciaIcon(a.getTendenciaDimension("decidir")),L),s(2),c("",a.getContadorDimension("decidir")," actividades"),s(2),c(" ",a.mejorDimension==="decidir"?"\u{1F3C6} Mejor":a.peorDimension==="decidir"?"\u{1F4C8} A mejorar":""," "),s(2),f("ngIf",a.actividadesValidas.length>2),s(),f("ngIf",a.actividadesValidas.length>0)("ngIfElse",d),s(29),f("ngIf",!a.mostrarPorActividad),s(),f("ngIf",a.mostrarPorActividad),s(7),f("ngIf",a.actividadesValidas.length>0)}},dependencies:[st,fe,Gr,zr],encapsulation:2})};var Wr=(e,r,t)=>({"text-green-600":e,"text-yellow-600":r,"text-red-600":t}),vo=(e,r)=>({"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":r}),bo=(e,r,t)=>({"bg-green-100 text-green-800":e,"bg-yellow-100 text-yellow-800":r,"bg-red-100 text-red-800":t}),de=(e,r,t,a)=>({"bg-green-100 text-green-800":e,"bg-blue-100 text-blue-800":r,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":a}),yo=e=>({"bg-purple-50":e}),_o=e=>({"bg-blue-50":e}),Co=e=>({"bg-yellow-50":e}),wo=e=>({"bg-green-50":e});function So(e,r){e&1&&(i(0,"div",12),x(1,"div",13),i(2,"p",14),o(3,"Cargando informaci\xF3n..."),n()())}function Eo(e,r){if(e&1&&(i(0,"div",15)(1,"div",16),w(),i(2,"svg",17),x(3,"path",18),n(),S(),i(4,"p"),o(5),n()()()),e&2){let t=g();s(5),_(t.error)}}function Ao(e,r){if(e&1&&(i(0,"span",39),o(1),n()),e&2){let t=g().$implicit;s(),c(" ",t.badge," ")}}function Io(e,r){if(e&1){let t=te();i(0,"button",35),H("click",function(){let d=V(t).$implicit,l=g(2);return z(l.cambiarTab(d.id))}),i(1,"div",36),x(2,"span",37),i(3,"span"),o(4),n(),v(5,Ao,2,1,"span",38),n()()}if(e&2){let t=r.$implicit,a=g(2);D(a.getTabClass(t.id)),s(2),f("innerHTML",t.icon,L),s(2),_(t.label),s(),f("ngIf",t.badge)}}function Do(e,r){if(e&1&&(i(0,"div",40)(1,"h2",41),o(2,"Informaci\xF3n General"),n(),i(3,"div",42)(4,"div",43)(5,"h3",44),o(6,"Detalles de la Materia"),n(),i(7,"div",45)(8,"p")(9,"span",46),o(10,"Materia:"),n(),o(11),n(),i(12,"p")(13,"span",46),o(14,"Profesor:"),n(),o(15),n(),i(16,"p")(17,"span",46),o(18,"Curso:"),n(),o(19),n()()(),i(20,"div",43)(21,"h3",44),o(22,"Rendimiento Actual"),n(),i(23,"div",45)(24,"p")(25,"span",46),o(26,"Promedio:"),n(),i(27,"span",47),o(28),n()(),i(29,"p")(30,"span",46),o(31,"Estado:"),n(),i(32,"span",48),o(33),n()()()()()()),e&2){let t=g(2);s(11),c(" ",t.detalleMateria.nombre,""),s(4),c(" ",t.detalleMateria.profesor,""),s(4),c(" ",t.detalleMateria.curso,""),s(8),f("ngClass",me(7,Wr,t.detalleMateria.promedio>=80,t.detalleMateria.promedio>=60&&t.detalleMateria.promedio<80,t.detalleMateria.promedio<60)),s(),_(t.detalleMateria.promedio),s(4),f("ngClass",et(11,vo,t.detalleMateria.promedio>=60,t.detalleMateria.promedio<60)),s(),c(" ",t.detalleMateria.promedio>=60?"Aprobando":"En Riesgo"," ")}}function To(e,r){if(e&1&&(i(0,"div"),x(1,"app-asistencia-chart",49),n()),e&2){let t=g(2);s(),f("datosAsistencia",t.asistencia)("titulo","An\xE1lisis de Asistencia - "+t.detalleMateria.nombre)}}function Mo(e,r){if(e&1&&(i(0,"span",70),o(1),n()),e&2){let t=g().$implicit;f("ngClass",me(2,Wr,t.nota>=80,t.nota>=60&&t.nota<80,t.nota<60)),s(),c(" ",t.nota," ")}}function jo(e,r){e&1&&(i(0,"span",71),o(1,"Sin calificar"),n())}function Oo(e,r){if(e&1&&(i(0,"tr",59)(1,"td",60)(2,"div",61),o(3),n()(),i(4,"td",62)(5,"div",63),o(6),n()(),i(7,"td",60)(8,"span",64),o(9),n()(),i(10,"td",65),o(11),n(),i(12,"td",60)(13,"span",66),o(14),n()(),i(15,"td",67),v(16,Mo,2,6,"span",68)(17,jo,2,0,"span",69),n()()),e&2){let t=r.$implicit,a=g(3);s(3),_(t.titulo||"Sin t\xEDtulo"),s(3),c(" ",t.descripcion||"Sin descripci\xF3n"," "),s(3),c(" ",t.tipo||t.dimension||"No especificado"," "),s(2),c(" ",a.formatearFecha(t.fecha_entrega||t.fecha_creacion)," "),s(2),f("ngClass",me(8,bo,t.estado==="Entregado",t.estado==="Pendiente",t.estado==="Vencido")),s(),c(" ",t.estado," "),s(2),f("ngIf",t.nota!==null&&t.nota!==void 0),s(),f("ngIf",t.nota===null||t.nota===void 0)}}function ko(e,r){if(e&1&&(i(0,"div",40)(1,"div",50)(2,"h2",51),o(3,"Actividades Asignadas"),n(),i(4,"div",52),o(5),n()(),i(6,"div",53)(7,"table",54)(8,"thead",55)(9,"tr")(10,"th",56),o(11,"T\xEDtulo"),n(),i(12,"th",56),o(13,"Descripci\xF3n"),n(),i(14,"th",56),o(15,"Tipo"),n(),i(16,"th",56),o(17,"Fecha"),n(),i(18,"th",56),o(19,"Estado"),n(),i(20,"th",56),o(21,"Nota"),n()()(),i(22,"tbody",57),v(23,Oo,18,12,"tr",58),n()()()()),e&2){let t=g(2);s(5),c(" Total: ",t.actividades.length," actividades "),s(18),f("ngForOf",t.actividades)("ngForTrackBy",t.trackByActividadId)}}function Po(e,r){e&1&&(i(0,"div",91),w(),i(1,"svg",92),x(2,"path",93),n(),S(),i(3,"h3",94),o(4,"No hay actividades calificadas"),n(),i(5,"p",95),o(6,'No hay actividades con estado "Entregado" para mostrar.'),n()())}function Fo(e,r){if(e&1&&(i(0,"div",63),o(1),tt(2,"slice"),n()),e&2){let t=g().$implicit;s(),Ze(" ",rt(2,2,t.descripcion,0,50),"",t.descripcion.length>50?"...":""," ")}}function No(e,r){if(e&1&&(i(0,"span",105),o(1),n()),e&2){let t=g().$implicit;f("ngClass",R(2,de,t.nota>=80,t.nota>=70&&t.nota<80,t.nota>=60&&t.nota<70,t.nota<60)),s(),c(" ",t.nota," ")}}function Bo(e,r){if(e&1&&(i(0,"span",105),o(1),n()),e&2){let t=g().$implicit;f("ngClass",R(2,de,t.nota>=80,t.nota>=70&&t.nota<80,t.nota>=60&&t.nota<70,t.nota<60)),s(),c(" ",t.nota," ")}}function Lo(e,r){if(e&1&&(i(0,"span",105),o(1),n()),e&2){let t=g().$implicit;f("ngClass",R(2,de,t.nota>=80,t.nota>=70&&t.nota<80,t.nota>=60&&t.nota<70,t.nota<60)),s(),c(" ",t.nota," ")}}function Ho(e,r){if(e&1&&(i(0,"span",105),o(1),n()),e&2){let t=g().$implicit;f("ngClass",R(2,de,t.nota>=80,t.nota>=70&&t.nota<80,t.nota>=60&&t.nota<70,t.nota<60)),s(),c(" ",t.nota," ")}}function Vo(e,r){if(e&1&&(i(0,"tr",59)(1,"td",114)(2,"div",61),o(3),n(),v(4,Fo,3,6,"div",115),n(),i(5,"td",116),v(6,No,2,7,"span",117),n(),i(7,"td",116),v(8,Bo,2,7,"span",117),n(),i(9,"td",116),v(10,Lo,2,7,"span",117),n(),i(11,"td",116),v(12,Ho,2,7,"span",117),n(),i(13,"td",107),o(14),n()()),e&2){let t=r.$implicit,a=g(4);s(3),_(t.titulo),s(),f("ngIf",t.descripcion),s(),f("ngClass",re(11,yo,t.dimension==="ser")),s(),f("ngIf",t.dimension==="ser"),s(),f("ngClass",re(13,_o,t.dimension==="saber")),s(),f("ngIf",t.dimension==="saber"),s(),f("ngClass",re(15,Co,t.dimension==="hacer")),s(),f("ngIf",t.dimension==="hacer"),s(),f("ngClass",re(17,wo,t.dimension==="decidir")),s(),f("ngIf",t.dimension==="decidir"),s(2),c(" ",a.formatearFecha(t.fecha_entrega||t.fecha_creacion)," ")}}function zo(e,r){if(e&1&&(i(0,"div",53)(1,"table",54)(2,"thead",55)(3,"tr")(4,"th",96),o(5," Actividad "),n(),i(6,"th",97),o(7," Ser "),n(),i(8,"th",98),o(9," Saber "),n(),i(10,"th",99),o(11," Hacer "),n(),i(12,"th",100),o(13," Decidir "),n(),i(14,"th",101),o(15," Fecha "),n()()(),i(16,"tbody",57),v(17,Vo,15,19,"tr",58),i(18,"tr",102)(19,"td",103),o(20," Asistencia "),n(),i(21,"td",104)(22,"span",105),o(23),n()(),x(24,"td",106)(25,"td",106)(26,"td",106),i(27,"td",107),o(28),n()(),i(29,"tr",108)(30,"td",109),o(31," Promedio por dimensi\xF3n "),n(),i(32,"td",106)(33,"span",110),o(34),n()(),i(35,"td",106)(36,"span",111),o(37),n()(),i(38,"td",106)(39,"span",112),o(40),n()(),i(41,"td",106)(42,"span",113),o(43),n()()()()()()),e&2){let t=g(3);s(17),f("ngForOf",t.getActividadesEntregadas())("ngForTrackBy",t.trackByActividadId),s(5),f("ngClass",R(9,de,t.calcularNotaAsistencia()>=80,t.calcularNotaAsistencia()>=70&&t.calcularNotaAsistencia()<80,t.calcularNotaAsistencia()>=60&&t.calcularNotaAsistencia()<70,t.calcularNotaAsistencia()<60)),s(),c(" ",t.calcularNotaAsistencia()," "),s(5),c(" ",t.formatearFecha(t.fechaActual)," "),s(6),c(" ",t.calcularPromedioPorDimension("ser",!0)," "),s(3),c(" ",t.calcularPromedioPorDimension("saber")," "),s(3),c(" ",t.calcularPromedioPorDimension("hacer")," "),s(3),c(" ",t.calcularPromedioPorDimension("decidir")," ")}}function Go(e,r){e&1&&(i(0,"span",118),o(1,"Calculando predicci\xF3n..."),n())}function Ro(e,r){if(e&1&&(i(0,"span",119),o(1),n()),e&2){let t=g(3);s(),c(" Predicci\xF3n de Nota: ",t.prediccionNota," ")}}function Wo(e,r){if(e&1){let t=te();i(0,"div",40)(1,"div",72)(2,"h2",51),o(3,"Notas por Dimensi\xF3n"),n(),i(4,"div",52),o(5),n()(),i(6,"div",73)(7,"div",74),x(8,"div",75),o(9," Ser "),n(),i(10,"div",76),x(11,"div",77),o(12," Saber "),n(),i(13,"div",78),x(14,"div",79),o(15," Hacer "),n(),i(16,"div",80),x(17,"div",81),o(18," Decidir "),n()(),i(19,"div",82)(20,"div",83)(21,"h3",84),o(22,"Reporte de Calificaciones"),n()(),v(23,Po,7,0,"div",85)(24,zo,44,14,"div",86),i(25,"div",87)(26,"button",88),H("click",function(){V(t);let d=g(2);return z(d.predecirNotaFinal())}),o(27," Predecir Nota Final "),n(),v(28,Go,2,0,"span",89)(29,Ro,2,1,"span",90),n()()()}if(e&2){let t=g(2);s(5),c(" Total: ",t.getActividadesEntregadas().length," actividades calificadas "),s(18),f("ngIf",t.getActividadesEntregadas().length===0),s(),f("ngIf",t.getActividadesEntregadas().length>0),s(2),f("disabled",t.cargandoPrediccion),s(2),f("ngIf",t.cargandoPrediccion),s(),f("ngIf",t.prediccionNota&&!t.cargandoPrediccion)}}function $o(e,r){e&1&&(i(0,"div",40)(1,"h2",41),o(2,"An\xE1lisis Predictivo"),n(),i(3,"div",120)(4,"div",121),w(),i(5,"svg",122),x(6,"path",123),n(),S(),i(7,"p",124),o(8,"Los an\xE1lisis predictivos y comparativos estar\xE1n disponibles pr\xF3ximamente."),n()()()())}function Uo(e,r){if(e&1&&(i(0,"div",40),x(1,"app-notas-grafico",125),n()),e&2){let t=g(2);s(),f("actividades",t.getActividadesEntregadas())}}function qo(e,r){if(e&1&&(i(0,"div")(1,"div",19)(2,"div",20)(3,"p",21),o(4,"Promedio General"),n(),i(5,"p",22),o(6),n()(),i(7,"div",23)(8,"p",21),o(9,"Asistencia"),n(),i(10,"p",24),o(11),n()(),i(12,"div",25)(13,"p",21),o(14,"Actividades"),n(),i(15,"p",26),o(16),n()(),i(17,"div",27)(18,"p",21),o(19,"Clases Totales"),n(),i(20,"p",28),o(21),n()()(),i(22,"div",29)(23,"div",30)(24,"nav",31),v(25,Io,6,5,"button",32),n()(),i(26,"div",33),v(27,Do,34,14,"div",34)(28,To,2,2,"div",11)(29,ko,24,3,"div",34)(30,Wo,30,6,"div",34)(31,$o,9,0,"div",34)(32,Uo,2,1,"div",34),n()()()),e&2){let t=g();s(6),_(t.detalleMateria.promedio),s(5),c("",t.asistencia.porcentaje,"%"),s(5),_(t.actividades.length),s(5),_(t.asistencia.total_clases),s(4),f("ngForOf",t.tabs)("ngForTrackBy",t.trackByTabId),s(2),f("ngIf",t.tabActual==="info"),s(),f("ngIf",t.tabActual==="asistencia"),s(),f("ngIf",t.tabActual==="actividades"),s(),f("ngIf",t.tabActual==="notas"),s(),f("ngIf",t.tabActual==="analisis"),s(),f("ngIf",t.tabActual==="graficos")}}var Rr=class e{constructor(r,t,a,d){this.route=r;this.router=t;this.alumnoService=a;this.http=d}materiaId;cargando=!0;error="";detalleMateria={nombre:"",profesor:"",promedio:0,curso:""};actividades=[];asistencia={total_clases:0,clases_asistidas:0,clases_perdidas:0,porcentaje:0,historial_semanal:[]};tabActual="info";tabs=[{id:"info",label:"Informaci\xF3n",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',badge:null},{id:"asistencia",label:"Asistencia",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>',badge:null},{id:"actividades",label:"Actividades",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>',badge:null},{id:"notas",label:"Notas",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>',badge:null},{id:"analisis",label:"An\xE1lisis",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>',badge:null},{id:"graficos",label:"Gr\xE1ficos",icon:'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17v-6m4 6V7m-8 10v-2"></path></svg>',badge:null}];prediccionNota=null;cargandoPrediccion=!1;fechaActual=new Date().toISOString();ngOnInit(){this.route.params.subscribe(r=>{this.materiaId=+r.id,this.cargarDatosMateria()})}cambiarTab(r){this.tabActual=r}getTabClass(r){return this.tabActual===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}trackByTabId(r,t){return t.id}trackByActividadId(r,t){return t.id||r}formatearFecha(r){if(!r)return"Sin fecha";try{let t=new Date(r),a=t.getDate().toString().padStart(2,"0"),d=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear();return`${a}/${d}/${l}`}catch{return"Fecha inv\xE1lida"}}cargarDatosMateria(){this.cargando=!0,this.error="",this.alumnoService.getDetalleMateriaAlumno(this.materiaId).subscribe({next:r=>{this.detalleMateria=r.materia,this.actividades=r.actividades,this.asistencia=r.asistencia,this.actualizarBadgesTabs(),this.cargando=!1},error:r=>{console.error("Error al cargar detalle de materia:",r),this.error="Error al cargar los datos de la materia",this.cargando=!1}})}actualizarBadgesTabs(){let r=this.tabs.find(a=>a.id==="actividades");r&&(r.badge=this.actividades.length.toString());let t=this.tabs.find(a=>a.id==="asistencia");t&&(t.badge=`${this.asistencia.porcentaje}%`)}volver(){this.router.navigate(["/mi-rendimiento"])}getActividadesEntregadas(){return this.actividades.filter(r=>r.estado==="Entregado"||r.entregado===!0)}calcularNotaAsistencia(){if(this.asistencia.porcentaje!==void 0&&this.asistencia.porcentaje!==null)return this.asistencia.porcentaje;if(this.asistencia.total_clases&&this.asistencia.total_clases>0){let r=this.asistencia.clases_asistidas/this.asistencia.total_clases*100;return Math.round(r)}return 100}calcularPromedioPorDimension(r,t=!1){let a=this.getActividadesEntregadas().filter(m=>m.dimension?.toLowerCase()===r.toLowerCase()),d=[];return a.forEach(m=>{m.nota!==void 0&&m.nota!==null&&d.push(Number(m.nota))}),r==="ser"&&t&&d.push(this.calcularNotaAsistencia()),d.length===0?"N/A":(d.reduce((m,p)=>m+p,0)/d.length).toFixed(1)}calcularPromedioGeneral(r=!1){let t=this.getActividadesEntregadas(),a=[];return t.forEach(l=>{l.nota!==void 0&&l.nota!==null&&a.push(Number(l.nota))}),r&&a.push(this.calcularNotaAsistencia()),a.length===0?"N/A":(a.reduce((l,m)=>l+m,0)/a.length).toFixed(1)}predecirNotaFinal(){this.cargandoPrediccion=!0,this.prediccionNota=null;let t={actividades:this.getActividadesEntregadas().map(a=>({dimension:a.dimension,nota:a.nota})),asistencia_porcentaje:this.asistencia.porcentaje};this.http.post(mt.apiUrl+"api/predecir/",t).subscribe({next:a=>{this.prediccionNota=Math.round(a.nota_predicha).toString(),this.cargandoPrediccion=!1},error:a=>{console.error("Error en predicci\xF3n:",a),this.cargandoPrediccion=!1}})}static \u0275fac=function(t){return new(t||e)(I(dt),I(pt),I(ct),I(lt))};static \u0275cmp=G({type:e,selectors:[["app-alumno-materia-detalle"]],decls:16,vars:5,consts:[[1,"flex","min-h-screen"],[1,"w-64"],[1,"flex-1","p-6","bg-gradient-to-b","from-blue-100","to-blue-300","overflow-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","text-blue-600","hover:text-blue-800","mb-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-600"],["class","flex justify-center items-center my-10",4,"ngIf"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-lg",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","my-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-4","border-blue-500"],[1,"ml-4","text-lg","text-gray-600"],[1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-6","rounded-lg"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-8"],[1,"bg-white","p-4","rounded-lg","shadow-md","border-l-4","border-blue-500"],[1,"text-gray-600","text-sm","font-medium"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-white","p-4","rounded-lg","shadow-md","border-l-4","border-green-500"],[1,"text-2xl","font-bold","text-green-600"],[1,"bg-white","p-4","rounded-lg","shadow-md","border-l-4","border-purple-500"],[1,"text-2xl","font-bold","text-purple-600"],[1,"bg-white","p-4","rounded-lg","shadow-md","border-l-4","border-yellow-500"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"bg-white","rounded-lg","shadow-lg"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"flex","space-x-8","px-6"],["class","py-4 px-1 font-medium text-sm transition-all duration-200 border-b-2 focus:outline-none",3,"class","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-6"],["class","space-y-6",4,"ngIf"],[1,"py-4","px-1","font-medium","text-sm","transition-all","duration-200","border-b-2","focus:outline-none",3,"click"],[1,"flex","items-center","space-x-2"],[3,"innerHTML"],["class","bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-0.5 rounded-full",4,"ngIf"],[1,"bg-blue-100","text-blue-800","text-xs","font-semibold","px-2","py-0.5","rounded-full"],[1,"space-y-6"],[1,"text-2xl","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-gray-50","p-4","rounded-lg"],[1,"font-semibold","text-gray-700","mb-3"],[1,"space-y-2"],[1,"font-medium","text-gray-600"],[1,"text-lg","font-bold",3,"ngClass"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[3,"datosAsistencia","titulo"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],["class","font-semibold",3,"ngClass",4,"ngIf"],["class","text-gray-400 italic",4,"ngIf"],[1,"font-semibold",3,"ngClass"],[1,"text-gray-400","italic"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","flex-wrap","gap-3","mb-4"],[1,"flex","items-center","px-3","py-1","rounded-full","bg-purple-50","text-purple-700","text-sm"],[1,"h-3","w-3","rounded-full","bg-purple-500","mr-2"],[1,"flex","items-center","px-3","py-1","rounded-full","bg-blue-50","text-blue-700","text-sm"],[1,"h-3","w-3","rounded-full","bg-blue-500","mr-2"],[1,"flex","items-center","px-3","py-1","rounded-full","bg-yellow-50","text-yellow-700","text-sm"],[1,"h-3","w-3","rounded-full","bg-yellow-500","mr-2"],[1,"flex","items-center","px-3","py-1","rounded-full","bg-green-50","text-green-700","text-sm"],[1,"h-3","w-3","rounded-full","bg-green-500","mr-2"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"bg-gray-50","p-4","border-b","border-gray-200"],[1,"font-semibold","text-gray-700"],["class","p-8 text-center",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"mt-8","bg-blue-50","rounded-lg","p-4","flex","items-center","gap-4"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded","font-semibold","transition",3,"click","disabled"],["class","text-blue-700",4,"ngIf"],["class","text-blue-900 font-bold",4,"ngIf"],[1,"p-8","text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-purple-500","uppercase","tracking-wider","w-28","bg-purple-50"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-blue-500","uppercase","tracking-wider","w-28","bg-blue-50"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-yellow-500","uppercase","tracking-wider","w-28","bg-yellow-50"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-green-500","uppercase","tracking-wider","w-28","bg-green-50"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","w-28"],[1,"bg-gray-50","hover:bg-gray-100","transition-colors"],[1,"px-4","py-3","text-sm","text-gray-700","font-medium"],[1,"px-4","py-3","text-center","bg-purple-50"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-4","py-3","text-center"],[1,"px-4","py-3","text-center","text-sm","text-gray-500"],[1,"bg-gray-50","font-medium"],[1,"px-4","py-3","text-sm","text-gray-700"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-purple-100","text-purple-800"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-yellow-100","text-yellow-800"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-green-100","text-green-800"],[1,"px-4","py-3","whitespace-nowrap"],["class","text-sm text-gray-500",4,"ngIf"],[1,"px-4","py-3","text-center",3,"ngClass"],["class","px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",3,"ngClass",4,"ngIf"],[1,"text-blue-700"],[1,"text-blue-900","font-bold"],[1,"bg-purple-50","border-l-4","border-purple-400","p-4","rounded"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-purple-400","mr-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"text-purple-700"],[3,"actividades"]],template:function(t,a){t&1&&(i(0,"div",0),x(1,"app-sidebar",1),i(2,"main",2)(3,"div",3)(4,"div")(5,"button",4),H("click",function(){return a.volver()}),w(),i(6,"svg",5),x(7,"path",6),n(),o(8," Volver al Dashboard "),n(),S(),i(9,"h1",7),o(10),n(),i(11,"p",8),o(12),n()()(),v(13,So,4,0,"div",9)(14,Eo,6,1,"div",10)(15,qo,33,12,"div",11),n()()),t&2&&(s(10),_(a.detalleMateria.nombre||"Cargando..."),s(2),c("Profesor: ",a.detalleMateria.profesor,""),s(),f("ngIf",a.cargando),s(),f("ngIf",a.error),s(),f("ngIf",!a.cargando&&!a.error))},dependencies:[nt,it,fe,ft,ue,ot,Ie],encapsulation:2})};export{Rr as AlumnoMateriaDetalleComponent};
